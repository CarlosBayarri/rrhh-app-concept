!function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function t(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{TDBs:function(e,i,r){"use strict";r.r(i),r.d(i,"DashboardModule",function(){return De});var a,c,o,s,u,b,m,l=r("ofXK"),f=r("hctd"),d=r("3Pt+"),p=r("tyNb"),h=r("fXoL"),g=((o=function e(){n(this,e)}).\u0275mod=h.Lb({type:o}),o.\u0275inj=h.Kb({factory:function(e){return new(e||o)},imports:[[l.c,f.a,d.q,d.h,p.f]]}),o),v=((c=function e(){n(this,e)}).\u0275mod=h.Lb({type:c}),c.\u0275inj=h.Kb({factory:function(e){return new(e||c)},imports:[[l.c,f.a,d.q,p.f]]}),c),S=((a=function e(){n(this,e)}).\u0275mod=h.Lb({type:a}),a.\u0275inj=h.Kb({factory:function(e){return new(e||a)},imports:[[l.c,f.a,p.f]]}),a),y=r("pLZG"),T=r("v8Ou"),k=r("l7P3"),O=r("lJxs"),A=r("I/3d"),C=((u=function(){function e(t){n(this,e),this.firestore=t}return t(e,[{key:"createDepartment",value:function(e){return delete e.id,this.firestore.firestore.collection("departments").add(Object.assign({},e))}},{key:"modifyDepartment",value:function(e){var t=e.id;return delete e.id,this.firestore.firestore.doc("departments/"+t).set(Object.assign({},e))}},{key:"initDepartmentsListener",value:function(){return this.firestore.collection("departments").snapshotChanges().pipe(Object(O.a)(function(e){return e.map(function(e){return Object.assign({id:e.payload.doc.id},e.payload.doc.data())})}))}},{key:"deleteDepartment",value:function(e){return this.firestore.doc("departments/"+e).delete()}}]),e}()).\u0275fac=function(e){return new(e||u)(h.Xb(A.a))},u.\u0275prov=h.Jb({token:u,factory:u.\u0275fac,providedIn:"root"}),u),w=((s=function(){function e(t){n(this,e),this.firestore=t}return t(e,[{key:"createEmployee",value:function(e){return delete e.id,this.firestore.firestore.collection("staff").add(Object.assign({},e))}},{key:"modifyEmployee",value:function(e){var t=e.id;return delete e.id,this.firestore.firestore.doc("staff/"+t).set(Object.assign({},e))}},{key:"initstaffListener",value:function(){return this.firestore.collection("staff").snapshotChanges().pipe(Object(O.a)(function(e){return e.map(function(e){return Object.assign({id:e.payload.doc.id},e.payload.doc.data())})}))}},{key:"deleteEmployee",value:function(e){return this.firestore.doc("staff/"+e).delete()}}]),e}()).\u0275fac=function(e){return new(e||s)(h.Xb(A.a))},s.\u0275prov=h.Jb({token:s,factory:s.\u0275fac,providedIn:"root"}),s),x=r("lGQG"),j=r("/t3+"),D=r("bTqV"),N=r("STbY"),I=r("MutI"),F=r("NFeN"),_=r("FKr1"),M=((m=function(){function e(t,i,r){n(this,e),this.store=t,this.AuthService=i,this.router=r}return t(e,[{key:"logOut",value:function(){var e=this;this.AuthService.logOut().then(function(){e.router.navigate(["/login"])})}},{key:"ngOnInit",value:function(){var e=this;this.userSubscription=this.store.select("user").pipe(Object(y.a)(function(e){return null!==e.user})).subscribe(function(t){var n=t.user;e.username=n.name})}},{key:"ngOnDestroy",value:function(){this.userSubscription.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||m)(h.Nb(k.h),h.Nb(x.a),h.Nb(p.b))},m.\u0275cmp=h.Hb({type:m,selectors:[["app-toolbar"]],decls:21,vars:2,consts:[["color","primary",1,"w-100","mat-elevation-z3"],["mat-button",""],["src","favicon.ico"],[1,"spacer"],["src","assets/images/avatar.png","alt","profile image","height","40","width","40",1,"pointer","br-50",3,"matMenuTriggerFor"],["menu","matMenu"],[1,"flex-box","flex-column","w-100","text-center","p-2"],["src","assets/images/avatar.png","alt","profile image","height","40","width","40",1,"pointer","br-50"],[1,"text-capitalize"],[3,"click"],["matListIcon",""],["matLine",""]],template:function(e,t){if(1&e&&(h.Tb(0,"mat-toolbar",0),h.Tb(1,"mat-toolbar-row"),h.Tb(2,"button",1),h.Ob(3,"img",2),h.Ac(4," COMPANY "),h.Sb(),h.Ob(5,"span",3),h.Ob(6,"img",4),h.Tb(7,"mat-menu",null,5),h.Tb(9,"div",6),h.Ob(10,"br"),h.Ob(11,"img",7),h.Ob(12,"br"),h.Tb(13,"h3",8),h.Ac(14),h.Sb(),h.Tb(15,"mat-action-list"),h.Tb(16,"mat-list-item",9),h.ac("click",function(){return t.logOut()}),h.Tb(17,"mat-icon",10),h.Ac(18,"exit_to_app"),h.Sb(),h.Tb(19,"h3",11),h.Ac(20," Logout "),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Sb()),2&e){var n=h.oc(8);h.Cb(6),h.jc("matMenuTriggerFor",n),h.Cb(8),h.Bc(t.username)}},directives:[j.a,j.c,D.a,N.d,N.a,I.a,I.c,F.a,I.b,_.j],styles:[""]}),m),E=((b=function(){function e(t,i,r){n(this,e),this.store=t,this.departmentsService=i,this.staffService=r}return t(e,[{key:"ngOnInit",value:function(){var e=this;this.userSubscription=this.store.select("user").pipe(Object(y.a)(function(e){return null!==e.user})).subscribe(function(t){!function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(t),e.departmentsSubscription=e.departmentsService.initDepartmentsListener().subscribe(function(t){e.store.dispatch(T.b({departments:t}))}),e.staffSubscription=e.staffService.initstaffListener().subscribe(function(t){e.store.dispatch(T.c({staff:t}))})})}},{key:"ngOnDestroy",value:function(){var e,t,n;null===(e=this.userSubscription)||void 0===e||e.unsubscribe(),null===(t=this.departmentsSubscription)||void 0===t||t.unsubscribe(),null===(n=this.staffSubscription)||void 0===n||n.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||b)(h.Nb(k.h),h.Nb(C),h.Nb(w))},b.\u0275cmp=h.Hb({type:b,selectors:[["app-dashboard"]],decls:2,vars:0,template:function(e,t){1&e&&(h.Ob(0,"app-toolbar"),h.Ob(1,"router-outlet"))},directives:[M,p.g],styles:[""]}),b),L=r("PSD3"),q=r.n(L),B=function e(t,i,r,a,c,o){n(this,e),this.name=t,this.last_name=i,this.age=r,this.department=a,this.date_discharge=c,this.id=o},G=r("Wp6s"),H=r("kmnG"),K=r("qFsG"),J=r("d3UM");function P(e,t){if(1&e&&(h.Tb(0,"mat-option",18),h.Ac(1),h.Sb()),2&e){var n=t.$implicit;h.jc("value",n.id),h.Cb(1),h.Bc(n.name)}}function W(e,t){if(1&e&&(h.Tb(0,"mat-form-field",5),h.Tb(1,"mat-label"),h.Ac(2,"Department"),h.Sb(),h.Tb(3,"mat-select",16),h.yc(4,P,2,2,"mat-option",17),h.Sb(),h.Sb()),2&e){var n=h.ec();h.Cb(4),h.jc("ngForOf",n.departments)}}function $(e,t){1&e&&(h.Tb(0,"p",19),h.Ac(1,"There is no departments. Please, create a new one."),h.Sb())}function R(e,t){1&e&&(h.Tb(0,"span"),h.Ac(1,"Loading..."),h.Sb())}function U(e,t){1&e&&(h.Tb(0,"span"),h.Ac(1,"Modify"),h.Sb())}function X(e,t){1&e&&(h.Tb(0,"span"),h.Ac(1,"Add"),h.Sb())}var Y,z=function(){return["/"]},V=((Y=function(){function e(t,i,r,a,c){n(this,e),this.fb=t,this.staffService=i,this.store=r,this.router=a,this.route=c,this.loading=!1,this.departments=[]}return t(e,[{key:"save",value:function(){var e=this;if(!this.employeeForm.invalid){var t,n=this.employeeForm.value,i=n.name,r=n.last_name,a=n.age,c=n.department,o=new Date;this.store.dispatch(T.a()),this.id?(t=new B(i,r,a,c,o,this.id),this.staffService.modifyEmployee(t).then(function(){q.a.fire("Employee modified",t.name+" "+t.last_name,"success"),e.store.dispatch(T.e()),e.employeeForm.reset(),e.router.navigate(["/"])}).catch(function(t){e.store.dispatch(T.e()),q.a.fire("Error",t,"error")})):(t=new B(i,r,a,c,o),this.staffService.createEmployee(t).then(function(){q.a.fire("Employee created",t.name+" "+t.last_name,"success"),e.store.dispatch(T.e()),e.employeeForm.reset(),e.router.navigate(["/"])}).catch(function(t){e.store.dispatch(T.e()),q.a.fire("Error",t,"error")}))}}},{key:"ngOnInit",value:function(){var e=this;this.loadingSubscription=this.store.select("ui").subscribe(function(t){var n=t.isLoading;return e.loading=n}),this.departmentsSubscription=this.store.select("departments").subscribe(function(t){var n=t.departments;return e.departments=n}),this.employeeForm=this.fb.group({name:["",d.s.required],last_name:["",d.s.required],age:[null,d.s.required],department:["",d.s.required]}),this.activeRoutingSubscription=this.route.params.subscribe(function(t){e.id=t.id,e.staffSubscription=e.store.select("staff").subscribe(function(t){return t.staff.map(function(t){t.id===e.id&&e.employeeForm.setValue({name:t.name,last_name:t.last_name,age:t.age,department:t.department})})})})}},{key:"ngOnDestroy",value:function(){this.loadingSubscription.unsubscribe(),this.departmentsSubscription.unsubscribe(),this.activeRoutingSubscription.unsubscribe(),this.staffSubscription.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||Y)(h.Nb(d.d),h.Nb(w),h.Nb(k.h),h.Nb(p.b),h.Nb(p.a))},Y.\u0275cmp=h.Hb({type:Y,selectors:[["app-staff-form"]],decls:36,vars:9,consts:[[1,"container","flex-box","h-75"],[1,"margin-auto","col-sm-12","col-xs-12","col-md-6","col-lg-4","col-xl-4"],[3,"formGroup","ngSubmit"],["mat-card-avatar",""],[1,"flex-box","flex-column"],["appearance","fill"],["matInput","","type","text","placeholder","Write the name","formControlName","name"],["matInput","","type","text","placeholder","Write the last name","formControlName","last_name"],["matInput","","type","number","placeholder","Write the age","formControlName","age"],["appearance","fill",4,"ngIf","ngIfElse"],["ngNoDepartmentsTemplate",""],[1,"flex-box","flex-row"],["mat-button","","routerLinkActive","router-link-active",3,"routerLink"],[1,"spacer"],["mat-raised-button","","type","submit",3,"disabled"],[4,"ngIf"],["formControlName","department"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"text-center"]],template:function(e,t){if(1&e&&(h.Tb(0,"div",0),h.Tb(1,"div",1),h.Tb(2,"form",2),h.ac("ngSubmit",function(){return t.save()}),h.Tb(3,"mat-card"),h.Tb(4,"mat-card-header"),h.Tb(5,"div",3),h.Tb(6,"mat-icon"),h.Ac(7,"person"),h.Sb(),h.Sb(),h.Tb(8,"mat-card-title"),h.Ac(9,"New employee"),h.Sb(),h.Tb(10,"mat-card-subtitle"),h.Ac(11,"Define the name, last name, age and department"),h.Sb(),h.Sb(),h.Tb(12,"mat-card-content",4),h.Tb(13,"mat-form-field",5),h.Tb(14,"mat-label"),h.Ac(15,"Name"),h.Sb(),h.Ob(16,"input",6),h.Sb(),h.Tb(17,"mat-form-field",5),h.Tb(18,"mat-label"),h.Ac(19,"last name"),h.Sb(),h.Ob(20,"input",7),h.Sb(),h.Tb(21,"mat-form-field",5),h.Tb(22,"mat-label"),h.Ac(23,"Age"),h.Sb(),h.Ob(24,"input",8),h.Sb(),h.yc(25,W,5,1,"mat-form-field",9),h.yc(26,$,2,0,"ng-template",null,10,h.zc),h.Sb(),h.Tb(28,"mat-card-actions",11),h.Tb(29,"button",12),h.Ac(30,"Cancel"),h.Sb(),h.Ob(31,"span",13),h.Tb(32,"button",14),h.yc(33,R,2,0,"span",15),h.yc(34,U,2,0,"span",15),h.yc(35,X,2,0,"span",15),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Sb()),2&e){var n=h.oc(27);h.Cb(2),h.jc("formGroup",t.employeeForm),h.Cb(23),h.jc("ngIf",t.departments.length>0)("ngIfElse",n),h.Cb(4),h.jc("routerLink",h.kc(8,z)),h.Cb(3),h.jc("disabled",t.employeeForm.invalid),h.Cb(1),h.jc("ngIf",t.loading),h.Cb(1),h.jc("ngIf",t.id&&!t.loading),h.Cb(1),h.jc("ngIf",!t.id&&!t.loading)}},directives:[d.t,d.m,d.g,G.a,G.e,G.c,F.a,G.h,G.g,G.d,H.c,H.f,K.b,d.c,d.l,d.f,d.p,l.l,G.b,D.a,p.d,p.c,J.a,l.k,_.m],styles:[""]}),Y),Q=function e(t,i){n(this,e),this.name=t,this.id=i};function Z(e,t){1&e&&(h.Tb(0,"span"),h.Ac(1,"Loading..."),h.Sb())}function ee(e,t){1&e&&(h.Tb(0,"span"),h.Ac(1,"Modify"),h.Sb())}function te(e,t){1&e&&(h.Tb(0,"span"),h.Ac(1,"Add"),h.Sb())}var ne,ie,re=function(){return["/"]},ae=((ie=function(){function e(t,i,r,a,c){n(this,e),this.fb=t,this.departmentsService=i,this.store=r,this.router=a,this.route=c,this.loading=!1}return t(e,[{key:"save",value:function(){var e=this;if(!this.departmentForm.invalid){var t,n=this.departmentForm.value.name;this.store.dispatch(T.a()),this.id?(t=new Q(n,this.id),this.departmentsService.modifyDepartment(t).then(function(){q.a.fire("Department modified",t.name,"success"),e.store.dispatch(T.e()),e.departmentForm.reset(),e.router.navigate(["/"])}).catch(function(t){e.store.dispatch(T.e()),q.a.fire("Error",t,"error")})):(t=new Q(n),this.departmentsService.createDepartment(t).then(function(){q.a.fire("Department created",t.name,"success"),e.store.dispatch(T.e()),e.departmentForm.reset(),e.router.navigate(["/"])}).catch(function(t){e.store.dispatch(T.e()),q.a.fire("Error",t,"error")}))}}},{key:"ngOnInit",value:function(){var e=this;this.loadingSubscription=this.store.select("ui").subscribe(function(t){var n=t.isLoading;return e.loading=n}),this.departmentForm=this.fb.group({name:["",d.s.required]}),this.activeRoutingSubscription=this.route.params.subscribe(function(t){e.id=t.id,e.departmentsSubscription=e.store.select("departments").subscribe(function(t){return t.departments.map(function(t){t.id===e.id&&e.departmentForm.setValue({name:t.name})})})})}},{key:"ngOnDestroy",value:function(){this.loadingSubscription.unsubscribe(),this.departmentsSubscription.unsubscribe(),this.activeRoutingSubscription.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||ie)(h.Nb(d.d),h.Nb(C),h.Nb(k.h),h.Nb(p.b),h.Nb(p.a))},ie.\u0275cmp=h.Hb({type:ie,selectors:[["app-departments-form"]],decls:25,vars:7,consts:[[1,"container","flex-box","h-75"],[1,"margin-auto","col-sm-12","col-xs-12","col-md-6","col-lg-4","col-xl-4"],[3,"formGroup","ngSubmit"],["mat-card-avatar",""],[1,"flex-box","flex-column"],["appearance","fill"],["matInput","","type","text","placeholder","Write the name","formControlName","name"],[1,"flex-box","flex-row"],["mat-button","","routerLinkActive","router-link-active",3,"routerLink"],[1,"spacer"],["mat-raised-button","","type","submit",3,"disabled"],[4,"ngIf"]],template:function(e,t){1&e&&(h.Tb(0,"div",0),h.Tb(1,"div",1),h.Tb(2,"form",2),h.ac("ngSubmit",function(){return t.save()}),h.Tb(3,"mat-card"),h.Tb(4,"mat-card-header"),h.Tb(5,"div",3),h.Tb(6,"mat-icon"),h.Ac(7,"people"),h.Sb(),h.Sb(),h.Tb(8,"mat-card-title"),h.Ac(9,"New department"),h.Sb(),h.Tb(10,"mat-card-subtitle"),h.Ac(11,"Define the name"),h.Sb(),h.Sb(),h.Tb(12,"mat-card-content",4),h.Tb(13,"mat-form-field",5),h.Tb(14,"mat-label"),h.Ac(15,"Name"),h.Sb(),h.Ob(16,"input",6),h.Sb(),h.Sb(),h.Tb(17,"mat-card-actions",7),h.Tb(18,"button",8),h.Ac(19,"Cancel"),h.Sb(),h.Ob(20,"span",9),h.Tb(21,"button",10),h.yc(22,Z,2,0,"span",11),h.yc(23,ee,2,0,"span",11),h.yc(24,te,2,0,"span",11),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Sb()),2&e&&(h.Cb(2),h.jc("formGroup",t.departmentForm),h.Cb(16),h.jc("routerLink",h.kc(6,re)),h.Cb(3),h.jc("disabled",t.departmentForm.invalid),h.Cb(1),h.jc("ngIf",t.loading),h.Cb(1),h.jc("ngIf",t.id&&!t.loading),h.Cb(1),h.jc("ngIf",!t.id&&!t.loading))},directives:[d.t,d.m,d.g,G.a,G.e,G.c,F.a,G.h,G.g,G.d,H.c,H.f,K.b,d.c,d.l,d.f,G.b,D.a,p.d,p.c,l.l],styles:[""]}),ie),ce=((ne=function(){function e(t,i){n(this,e),this.departmentsService=t,this.router=i}return t(e,[{key:"editDepartment",value:function(e){this.router.navigate(["edit-department",e.id])}},{key:"deleteDepartment",value:function(e){var t=this;q.a.fire({title:"Are you sure?",text:"You will not be able to recover it!",icon:"warning",showDenyButton:!0,denyButtonText:"No please",confirmButtonText:"Sure"}).then(function(n){n.isConfirmed&&t.departmentsService.deleteDepartment(e.id).then(function(){q.a.fire("Deleted","Department deleted","success")}).catch(function(e){q.a.fire("Error",e.message,"error")})})}},{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||ne)(h.Nb(C),h.Nb(p.b))},ne.\u0275cmp=h.Hb({type:ne,selectors:[["app-departments-child"]],inputs:{department:"department"},decls:19,vars:2,consts:[["role","listitem"],[1,"pl-05"],[1,"spacer"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"]],template:function(e,t){if(1&e&&(h.Tb(0,"mat-list-item",0),h.Tb(1,"mat-icon"),h.Ac(2,"people"),h.Sb(),h.Tb(3,"span",1),h.Ac(4),h.Sb(),h.Ob(5,"span",2),h.Tb(6,"button",3),h.Tb(7,"mat-icon"),h.Ac(8,"more_vert"),h.Sb(),h.Sb(),h.Tb(9,"mat-menu",null,4),h.Tb(11,"button",5),h.ac("click",function(){return t.editDepartment(t.department)}),h.Tb(12,"mat-icon"),h.Ac(13,"edit"),h.Sb(),h.Ac(14,"Edit"),h.Sb(),h.Tb(15,"button",5),h.ac("click",function(){return t.deleteDepartment(t.department)}),h.Tb(16,"mat-icon"),h.Ac(17,"delete"),h.Sb(),h.Ac(18,"Delete"),h.Sb(),h.Sb(),h.Sb()),2&e){var n=h.oc(10);h.Cb(4),h.Bc(t.department.name),h.Cb(2),h.jc("matMenuTriggerFor",n)}},directives:[I.c,F.a,D.a,N.d,N.a,N.b],styles:[""]}),ne);function oe(e,t){1&e&&(h.Tb(0,"mat-list-item",6),h.Ac(1," No department "),h.Sb())}function se(e,t){1&e&&h.Ob(0,"app-departments-child",7),2&e&&h.jc("department",t.$implicit)}var ue,be,me=((ue=function(){function e(t,i){n(this,e),this.store=t,this.router=i,this.departments=[]}return t(e,[{key:"ngOnInit",value:function(){var e=this;this.departmentsSubscription=this.store.select("departments").subscribe(function(t){var n=t.departments;return e.departments=n})}},{key:"addDepartment",value:function(){this.router.navigate(["new-department"])}},{key:"ngOnDestroy",value:function(){this.departmentsSubscription.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||ue)(h.Nb(k.h),h.Nb(p.b))},ue.\u0275cmp=h.Hb({type:ue,selectors:[["app-departments-list"]],decls:9,vars:2,consts:[["role","list"],["mat-subheader","",1,"flex-box"],[1,"spacer"],["mat-icon-button","",3,"click"],["role","listitem",4,"ngIf"],[3,"department",4,"ngFor","ngForOf"],["role","listitem"],[3,"department"]],template:function(e,t){1&e&&(h.Tb(0,"mat-list",0),h.Tb(1,"div",1),h.Ac(2," Departments "),h.Ob(3,"span",2),h.Tb(4,"button",3),h.ac("click",function(){return t.addDepartment()}),h.Tb(5,"mat-icon"),h.Ac(6,"add"),h.Sb(),h.Sb(),h.Sb(),h.yc(7,oe,2,0,"mat-list-item",4),h.yc(8,se,1,1,"app-departments-child",5),h.Sb()),2&e&&(h.Cb(7),h.jc("ngIf",0===t.departments.length),h.Cb(1),h.jc("ngForOf",t.departments))},directives:[I.a,I.e,D.a,F.a,l.l,l.k,I.c,ce],styles:[""]}),ue),le=r("Qu3c"),fe=r("iadO"),de=((be=function(){function e(t,i,r){n(this,e),this.staffService=t,this.router=i,this.store=r}return t(e,[{key:"editEmployee",value:function(e){this.router.navigate(["edit-employee",e.id])}},{key:"deleteEmployee",value:function(e){var t=this;q.a.fire({title:"Are you sure?",text:"You will not be able to recover it!",icon:"warning",showDenyButton:!0,denyButtonText:"No please",confirmButtonText:"Sure"}).then(function(n){n.isConfirmed&&t.staffService.deleteEmployee(e.id).then(function(){q.a.fire("Deleted","Employee deleted","success")}).catch(function(e){q.a.fire("Error",e.message,"error")})})}},{key:"ngOnInit",value:function(){var e=this;this.name=this.employee.name,this.last_name=this.employee.last_name,this.age=this.employee.age,this.date_discharge=this.employee.date_discharge.toDate(),this.departmentsSubscription=this.store.select("departments").subscribe(function(t){return t.departments.map(function(t){t.id===e.employee.department&&(e.department=t.name)})})}},{key:"ngOnDestroy",value:function(){this.departmentsSubscription.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||be)(h.Nb(w),h.Nb(p.b),h.Nb(k.h))},be.\u0275cmp=h.Hb({type:be,selectors:[["app-staff-child"]],inputs:{employee:"employee"},decls:23,vars:8,consts:[[1,"mb-05"],["mat-card-avatar",""],["mat-icon-button","",1,"icon-corner",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"]],template:function(e,t){if(1&e&&(h.Tb(0,"mat-card",0),h.Tb(1,"mat-card-header"),h.Tb(2,"div",1),h.Tb(3,"mat-icon"),h.Ac(4,"person"),h.Sb(),h.Sb(),h.Tb(5,"mat-card-title"),h.Ac(6),h.Sb(),h.Tb(7,"mat-card-subtitle"),h.Ac(8),h.fc(9,"date"),h.Sb(),h.Sb(),h.Tb(10,"button",2),h.Tb(11,"mat-icon"),h.Ac(12,"more_vert"),h.Sb(),h.Sb(),h.Tb(13,"mat-menu",null,3),h.Tb(15,"button",4),h.ac("click",function(){return t.editEmployee(t.employee)}),h.Tb(16,"mat-icon"),h.Ac(17,"edit"),h.Sb(),h.Ac(18,"Edit"),h.Sb(),h.Tb(19,"button",4),h.ac("click",function(){return t.deleteEmployee(t.employee)}),h.Tb(20,"mat-icon"),h.Ac(21,"delete"),h.Sb(),h.Ac(22,"Delete"),h.Sb(),h.Sb(),h.Sb()),2&e){var n=h.oc(14);h.Cb(6),h.Ec("",t.name," ",t.last_name," (",t.age,")"),h.Cb(2),h.Dc("",t.department," - since ",h.gc(9,6,t.date_discharge),""),h.Cb(2),h.jc("matMenuTriggerFor",n)}},directives:[G.a,G.e,G.c,F.a,G.h,G.g,D.a,N.d,N.a,N.b],pipes:[l.e],styles:[""]}),be);function pe(e,t){if(1&e){var n=h.Ub();h.Tb(0,"mat-form-field",12),h.Tb(1,"mat-label"),h.Ac(2,"Search employee"),h.Sb(),h.Tb(3,"input",13),h.ac("ngModelChange",function(e){return h.qc(n),h.ec().search_name=e}),h.Sb(),h.Sb()}if(2&e){var i=h.ec();h.Cb(3),h.jc("ngModel",i.search_name)}}function he(e,t){if(1&e&&(h.Tb(0,"mat-option",16),h.Ac(1),h.Sb()),2&e){var n=t.$implicit;h.jc("value",n.id),h.Cb(1),h.Cc(" ",n.name," ")}}function ge(e,t){if(1&e){var n=h.Ub();h.Tb(0,"mat-form-field",12),h.Tb(1,"mat-label"),h.Ac(2,"Departments"),h.Sb(),h.Tb(3,"mat-select",14),h.ac("ngModelChange",function(e){return h.qc(n),h.ec().search_department=e}),h.yc(4,he,2,2,"mat-option",15),h.Sb(),h.Sb()}if(2&e){var i=h.ec();h.Cb(3),h.jc("ngModel",i.search_department),h.Cb(1),h.jc("ngForOf",i.departments)}}function ve(e,t){if(1&e){var n=h.Ub();h.Tb(0,"mat-form-field",12),h.Tb(1,"mat-label"),h.Ac(2,"Search by minimum date"),h.Sb(),h.Tb(3,"input",17),h.ac("ngModelChange",function(e){return h.qc(n),h.ec().search_date=e}),h.Sb(),h.Ob(4,"mat-datepicker-toggle",18),h.Ob(5,"mat-datepicker",null,19),h.Sb()}if(2&e){var i=h.oc(6),r=h.ec();h.Cb(3),h.jc("matDatepicker",i)("ngModel",r.search_date),h.Cb(1),h.jc("for",i)}}function Se(e,t){1&e&&(h.Tb(0,"mat-list-item",20),h.Ac(1," No employee "),h.Sb())}function ye(e,t){if(1&e&&h.Ob(0,"app-staff-child",22),2&e){var n=h.ec().$implicit;h.jc("employee",n)}}function Te(e,t){if(1&e&&(h.Tb(0,"div"),h.yc(1,ye,1,1,"app-staff-child",21),h.Sb()),2&e){var n=t.$implicit,i=h.ec();h.Cb(1),h.jc("ngIf",i.filterStaff(n))}}var ke,Oe,Ae,Ce,we=((ke=function(){function e(t,i){n(this,e),this.store=t,this.router=i,this.staff=[],this.filter="name"}return t(e,[{key:"filterStaff",value:function(e){switch(this.filter){case"name":return!this.search_name||(e.name+" "+e.last_name).toLowerCase().indexOf(this.search_name.toLowerCase())>-1;case"department":return!this.search_department||this.search_department===e.department;case"date":if(this.search_date){var t=e.date_discharge;t=t.toDate();var n=new Date(this.search_date);return console.log(t,n),t>=n}return!0;default:return!1}}},{key:"ngOnInit",value:function(){var e=this;this.staffSubscription=this.store.select("staff").subscribe(function(t){var n=t.staff;return e.staff=n}),this.departmentsSubscription=this.store.select("departments").subscribe(function(t){var n=t.departments;return e.departments=n})}},{key:"addEmployee",value:function(){this.router.navigate(["new-employee"])}},{key:"ngOnDestroy",value:function(){this.staffSubscription.unsubscribe(),this.departmentsSubscription.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||ke)(h.Nb(k.h),h.Nb(p.b))},ke.\u0275cmp=h.Hb({type:ke,selectors:[["app-staff-list"]],decls:25,vars:6,consts:[["role","list"],["mat-subheader","",1,"h-auto","flex-box","flex-column"],[1,"w-100","flex-box","flex-row"],[1,"flex-box","text-center"],[1,"spacer"],["mat-stroked-button","",3,"click"],["class","w-100",4,"ngIf"],["mat-icon-button","","matTooltip","More filters",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["role","listitem",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"w-100"],["matInput","","placeholder","John Doe",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["picker",""],["role","listitem"],[3,"employee",4,"ngIf"],[3,"employee"]],template:function(e,t){if(1&e&&(h.Tb(0,"mat-list",0),h.Tb(1,"div",1),h.Tb(2,"div",2),h.Tb(3,"span",3),h.Ac(4,"Staff"),h.Sb(),h.Ob(5,"span",4),h.Tb(6,"button",5),h.ac("click",function(){return t.addEmployee()}),h.Ac(7,"Create employee"),h.Sb(),h.Sb(),h.Tb(8,"div",2),h.yc(9,pe,4,1,"mat-form-field",6),h.yc(10,ge,5,2,"mat-form-field",6),h.yc(11,ve,7,3,"mat-form-field",6),h.Tb(12,"button",7),h.Tb(13,"mat-icon"),h.Ac(14,"filter_list"),h.Sb(),h.Sb(),h.Tb(15,"mat-menu",null,8),h.Tb(17,"button",9),h.ac("click",function(){return t.filter="name"}),h.Ac(18,"Name"),h.Sb(),h.Tb(19,"button",9),h.ac("click",function(){return t.filter="department"}),h.Ac(20,"Department"),h.Sb(),h.Tb(21,"button",9),h.ac("click",function(){return t.filter="date"}),h.Ac(22,"Discharge date"),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.yc(23,Se,2,0,"mat-list-item",10),h.yc(24,Te,2,1,"div",11),h.Sb()),2&e){var n=h.oc(16);h.Cb(9),h.jc("ngIf","name"===t.filter),h.Cb(1),h.jc("ngIf","department"===t.filter),h.Cb(1),h.jc("ngIf","date"===t.filter),h.Cb(1),h.jc("matMenuTriggerFor",n),h.Cb(11),h.jc("ngIf",0===t.staff.length),h.Cb(1),h.jc("ngForOf",t.staff)}},directives:[I.a,I.e,D.a,l.l,le.a,N.d,F.a,N.a,N.b,l.k,H.c,H.f,K.b,d.c,d.l,d.o,J.a,_.m,fe.b,fe.d,H.g,fe.a,I.c,de],styles:[""]}),ke),xe=[{path:"",component:E,children:[{path:"",component:(Oe=function(){function e(){n(this,e)}return t(e,[{key:"ngOnInit",value:function(){}}]),e}(),Oe.\u0275fac=function(e){return new(e||Oe)},Oe.\u0275cmp=h.Hb({type:Oe,selectors:[["app-home"]],decls:5,vars:0,consts:[[1,"container","pt-1"],[1,"col-xs-12","col-sm-12","col-md-4","col-lg-4","col-xl-4"],[1,"col-xs-12","col-sm-12","col-md-8","col-lg-8","col-xl-8"]],template:function(e,t){1&e&&(h.Tb(0,"div",0),h.Tb(1,"div",1),h.Ob(2,"app-departments-list"),h.Sb(),h.Tb(3,"div",2),h.Ob(4,"app-staff-list"),h.Sb(),h.Sb())},directives:[me,we],styles:[""]}),Oe)},{path:"new-employee",component:V},{path:"edit-employee/:id",component:V},{path:"new-department",component:ae},{path:"edit-department/:id",component:ae}]}],je=((Ce=function e(){n(this,e)}).\u0275mod=h.Lb({type:Ce}),Ce.\u0275inj=h.Kb({factory:function(e){return new(e||Ce)},imports:[[p.f.forChild(xe)],p.f]}),Ce),De=((Ae=function e(){n(this,e)}).\u0275mod=h.Lb({type:Ae}),Ae.\u0275inj=h.Kb({factory:function(e){return new(e||Ae)},imports:[[l.c,d.q,p.f,f.a,v,g,S,je]]}),Ae)}}])}();